(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n.p+"static/media/brick-hex.fab879f8.png"},28:function(e,t,n){e.exports=n.p+"static/media/forest-hex.8725920d.png"},29:function(e,t,n){e.exports=n.p+"static/media/field-hex.8c773516.png"},30:function(e,t,n){e.exports=n.p+"static/media/rock-hex.a45b3e02.png"},31:function(e,t,n){e.exports=n.p+"static/media/wheat-hex.dcd53bed.png"},32:function(e,t,n){e.exports=n.p+"static/media/empty-hex.f50bee80.png"},33:function(e,t,n){e.exports=n.p+"static/media/settlement.694f53ee.png"},34:function(e,t,n){e.exports=n.p+"static/media/city.26af67f7.png"},37:function(e,t,n){e.exports=n(49)},40:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);n(38),n(40);var a=n(1),i=n.n(a),l=n(13),r=n.n(l),c=n(14),s=n(36),o=n(3),u=n(4),m=n(6),d=n(5),p=n(7),h=n(53),f=n(50),b=n(52),v=n(16),y=n(15),O=n(25),j=n(26),g=n(9),E=n(27),T=n.n(E),k=n(28),C=n.n(k),S=n(29),N=n.n(S),x=n(30),w=n.n(x),U=n(31),A=n.n(U),I=[2,3,4,5,6,7,8,9,10,11,12],M={brick:T.a,field:N.a,forest:C.a,rock:w.a,wheat:A.a},L=n(32),B=n.n(L),F=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.alt,a=e.height;return i.a.createElement("img",{src:M[t]||B.a,alt:n||"Tile",height:a||90})}}]),t}(a.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.type,a=t.number,l=t.onClick;return a&&(e=i.a.createElement("div",{className:"tile-number"},i.a.createElement("span",null,i.a.createElement("b",null,a)))),i.a.createElement("div",{className:"tile",onClick:l},i.a.createElement(F,{type:n}),e)}}]),t}(a.Component),R=n(33),W=n.n(R),z=n(34),D=n.n(z),P=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.settlement,a=t.tiles,l=t.onClick,r=t.onTileClick;return e=n.isCity?{src:D.a,alt:"City",height:80}:{src:W.a,alt:"Settlement",height:60},i.a.createElement("div",null,i.a.createElement("img",{src:e.src,alt:e.alt,height:e.height,onClick:function(){return l(n)}}),i.a.createElement("div",{className:"d-flex justify-content-center bd-highlight mb-3"},a.map(function(e){return i.a.createElement("div",{className:"p-2 bd-highlight",key:e.id},i.a.createElement(J,{type:e.type,number:e.number,onClick:function(){return r(e)}}))})))}}]),t}(a.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.color;return i.a.createElement(g.b,Object.assign({},this.props,{outline:!0,color:n||"secondary"}),t)}}]),t}(a.Component),G=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.numbers,n=e.selectedNumber,a=e.onButtonClick,l=e.className,r=e.disabledNumbers;return i.a.createElement("div",{className:l},(t||I).map(function(e){var t=r&&-1!==r.indexOf(e);return i.a.createElement(q,{key:e,className:"btn-round p-2 m-2",disabled:t,active:e===n,onClick:function(){return a&&a(e)}},e)}))}}]),t}(a.Component),H=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.isOpen,a=e.toggle,l=e.onUpdateNumber,r=e.onUpdateType,c=e.onSave,s=e.onClear;return i.a.createElement(g.c,{isOpen:n},i.a.createElement(g.f,{toggle:a},"Change Tile"),i.a.createElement(g.d,null,i.a.createElement(G,{className:"d-flex justify-content-center flex-wrap mb-3",selectedNumber:t.number,onButtonClick:l,disabledNumbers:[7]}),i.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},Object.keys(M).map(function(e){return i.a.createElement(q,{key:e,className:"tile m-1",active:e===t.type,onClick:function(){return r(e)}},i.a.createElement(F,{type:e,height:70}))}))),i.a.createElement(g.e,{className:"d-flex justify-content-between"},i.a.createElement(q,{onClick:a},"Cancel"),i.a.createElement(q,{color:"info",onClick:s},"Clear"),i.a.createElement(q,{outline:!0,color:"success",onClick:function(){return c(t)}},"Done")))}}]),t}(a.Component);y.b.add(j.a);var K=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={showTileModal:!1,activeTile:{}},n.handleTileClick=function(e){n.setState({showTileModal:!0,activeTile:Object(v.a)({},e)})},n.toggleTileModal=function(){n.setState({activeTile:{},showTileModal:!n.state.showTileModal})},n.handleActiveTileClear=function(){var e=Object.assign(Object(v.a)({},n.state.activeTile),{number:null,type:null});n.setState({activeTile:e})},n.handleActiveTileNumberUpdate=function(e){var t=Object.assign(Object(v.a)({},n.state.activeTile),{number:e});n.setState({activeTile:t})},n.handleActiveTileTypeUpdate=function(e){var t=Object.assign(Object(v.a)({},n.state.activeTile),{type:e});n.setState({activeTile:t})},n.handleTileSave=function(){n.props.onTileUpdate(n.state.activeTile),n.toggleTileModal()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getAddButton",value:function(){var e=this.props,t=e.settlements,n=e.onSettlementAdd;return 5===t.filter(function(e){return!e.isCity}).length?i.a.createElement(g.a,{color:"info"},"Max number of settlements reached"):i.a.createElement(O.a,{className:"mb-3",icon:"plus-circle",size:"2x",onClick:function(){return n()}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.settlements,a=t.tiles,l=t.onSettlementUpdate,r=this.state,c=r.showTileModal,s=r.activeTile;return i.a.createElement(i.a.Fragment,null,i.a.createElement(H,{isOpen:c,tile:s,toggle:this.toggleTileModal,onUpdateNumber:this.handleActiveTileNumberUpdate,onUpdateType:this.handleActiveTileTypeUpdate,onSave:this.handleTileSave,onClear:this.handleActiveTileClear}),i.a.createElement("div",null,this.getAddButton(),n.map(function(t,n){return i.a.createElement(P,{key:t.id,settlement:t,tiles:a.filter(function(e){return e.settlementId===t.id}),onClick:l,onTileClick:e.handleTileClick})})))}}]),t}(a.Component),Q=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleNumberUpdate=function(e){-1===n.state.disabledNumbers.indexOf(e)&&n.setState({selectedNumber:e})},n.calculateResourcesForRolls=function(){var e=n.props,t=e.settlements;return e.tiles.reduce(function(e,n){var a=t.find(function(e){return e.id===n.settlementId}),i=n.type,l=n.number;return e[l]||(e[l]={}),e[l][i]||(e[l][i]=0),e[l][i]+=a.isCity?2:1,e},{})};var a=n.calculateResourcesForRolls(),i=I.filter(function(e){return!a[e]});return n.state={selectedNumber:e.selectedNumber,resources:a,disabledNumbers:i},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.resources,n=e.selectedNumber,a=e.disabledNumbers,l=t[n]||[];return i.a.createElement(i.a.Fragment,null,i.a.createElement(G,{className:"d-flex justify-content-center flex-wrap mb-5",selectedNumber:n,disabledNumbers:a,onButtonClick:this.handleNumberUpdate}),i.a.createElement("div",{className:"d-flex justify-content-center bd-highlight mb-3"},Object.keys(l).map(function(e){var t=l[e];return i.a.createElement("div",{className:"p-2 bd-highlight",key:e},i.a.createElement(J,{key:e,type:e,number:t}))})))}}]),t}(a.Component),V=n(54),X=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(g.j,{className:"p-0",expand:!0,color:"dark",fixed:"top",dark:!0},i.a.createElement(g.g,{className:"w-100",navbar:!0,justified:!0,horizontal:"center"},i.a.createElement(g.h,null,i.a.createElement(g.i,{to:"/setup",activeClassName:"active",tag:V.a},"Settlements")),i.a.createElement(g.h,null,i.a.createElement(g.i,{to:"/chart",activeClassName:"active",tag:V.a},"Chart"))))}}]),t}(a.Component),Y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={lastSettlementId:0,lastTileId:0,settlements:[],tiles:[],showTileModal:!1,activeTile:{}},n.saveStateToLocalStorage=function(){for(var e in n.state)localStorage.setItem(e,JSON.stringify(n.state[e]))},n.handleSettlementAdd=function(){for(var e=n.state.settlements.slice(),t=n.state.lastSettlementId+1,a=n.state.tiles.slice(),i=n.state.lastTileId,l=[],r=0;r<3;r++)l.push({id:++i,settlementId:t,type:null,number:null});n.setState({lastSettlementId:t,lastTileId:i,settlements:[{id:t,isCity:!1}].concat(Object(s.a)(e)),tiles:a.concat(l)})},n.handleSettlementUpdate=function(e){var t=n.state.settlements.slice();if(e.isCity?t.filter(function(e){return!e.isCity}).length<5:t.filter(function(e){return e.isCity}).length<4){var a=t.indexOf(e);t[a].isCity=!t[a].isCity,n.setState({settlements:t})}},n.handleTileUpdate=function(e){if(!(e.type&&!e.number||!e.type&&e.number)){var t=n.state.tiles.slice(),a=t.findIndex(function(t){return t.id===e.id});t[a]=Object.assign(t[a],e),n.setState({tiles:t})}},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.hydrateStateWithLocalStorage(),window.addEventListener("beforeunload",this.saveStateToLocalStorage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage),this.saveStateToLocalStorage()}},{key:"hydrateStateWithLocalStorage",value:function(){for(var e in this.state)if(localStorage.hasOwnProperty(e)){var t=localStorage.getItem(e);try{t=JSON.parse(t),this.setState(Object(c.a)({},e,t))}catch(n){this.setState(Object(c.a)({},e,t))}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.settlements,a=t.tiles;return i.a.createElement(i.a.Fragment,null,i.a.createElement(X,null),i.a.createElement("main",{className:"container"},i.a.createElement("div",{className:"text-center"},i.a.createElement(h.a,null,i.a.createElement(f.a,{path:"/setup",render:function(t){return i.a.createElement(K,Object.assign({},t,{settlements:n,tiles:a,onSettlementAdd:e.handleSettlementAdd,onSettlementUpdate:e.handleSettlementUpdate,onTileUpdate:e.handleTileUpdate}))}}),i.a.createElement(f.a,{path:"/chart",render:function(e){return i.a.createElement(Q,Object.assign({},e,{settlements:n,tiles:a.filter(function(e){return"empty"!==e.type})}))}}),i.a.createElement(b.a,{from:"/",to:"/setup"})))))}}]),t}(a.Component),Z=n(51);r.a.render(i.a.createElement(Z.a,null,i.a.createElement(Y,null)),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.2eafa994.chunk.js.map