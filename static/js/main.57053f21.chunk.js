(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n.p+"static/media/brick-hex.fab879f8.png"},28:function(e,t,n){e.exports=n.p+"static/media/forest-hex.8725920d.png"},29:function(e,t,n){e.exports=n.p+"static/media/field-hex.8c773516.png"},30:function(e,t,n){e.exports=n.p+"static/media/rock-hex.a45b3e02.png"},31:function(e,t,n){e.exports=n.p+"static/media/wheat-hex.dcd53bed.png"},32:function(e,t,n){e.exports=n.p+"static/media/empty-hex.f50bee80.png"},33:function(e,t,n){e.exports=n.p+"static/media/settlement.694f53ee.png"},34:function(e,t,n){e.exports=n.p+"static/media/city.26af67f7.png"},37:function(e,t,n){e.exports=n(49)},40:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);n(38),n(40);var a=n(1),l=n.n(a),i=n(13),r=n.n(i),c=n(14),s=n(36),o=n(3),u=n(4),m=n(6),d=n(5),p=n(7),h=n(53),f=n(50),b=n(52),v=n(16),y=n(15),g=n(25),O=n(26),j=n(9),E=n(27),C=n.n(E),k=n(28),S=n.n(k),T=n(29),N=n.n(T),x=n(30),w=n.n(x),U=n(31),A=n.n(U),I=[2,3,4,5,6,7,8,9,10,11,12],M={brick:C.a,field:N.a,forest:S.a,rock:w.a,wheat:A.a},B=n(32),L=n.n(B),F=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.alt,a=e.height;return l.a.createElement("img",{src:M[t]||L.a,alt:n||"Tile",height:a||90})}}]),t}(a.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.type,a=t.number,i=t.onClick;return a&&(e=l.a.createElement("div",{className:"tile-number"},l.a.createElement("span",null,l.a.createElement("b",null,a)))),l.a.createElement("div",{className:"tile",onClick:i},l.a.createElement(F,{type:n}),e)}}]),t}(a.Component),R=n(33),W=n.n(R),z=n(34),D=n.n(z),P=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.settlement,a=t.tiles,i=t.onClick,r=t.onTileClick;return e=n.isCity?{src:D.a,alt:"City",height:80}:{src:W.a,alt:"Settlement",height:60},l.a.createElement("div",null,l.a.createElement("img",{src:e.src,alt:e.alt,height:e.height,onClick:function(){return i(n)}}),l.a.createElement("div",{className:"d-flex justify-content-center bd-highlight mb-3"},a.map(function(e){return l.a.createElement("div",{className:"p-2 bd-highlight",key:e.id},l.a.createElement(J,{type:e.type,number:e.number,onClick:function(){return r(e)}}))})))}}]),t}(a.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.color;return l.a.createElement(j.b,Object.assign({},this.props,{outline:!0,color:n||"secondary"}),t)}}]),t}(a.Component),G=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.numbers,n=e.selectedNumber,a=e.onButtonClick,i=e.className,r=e.disabledNumbers;return l.a.createElement("div",{className:i},(t||I).map(function(e){var t=r&&-1!==r.indexOf(e);return l.a.createElement(q,{key:e,className:"btn-round p-2 m-2",disabled:t,active:e===n,onClick:function(){return a&&a(e)}},e)}))}}]),t}(a.Component),H=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.isOpen,a=e.toggle,i=e.onUpdateNumber,r=e.onUpdateType,c=e.onSave,s=e.onClear;return l.a.createElement(j.c,{isOpen:n},l.a.createElement(j.f,{toggle:a},"Change Tile"),l.a.createElement(j.d,null,l.a.createElement(G,{className:"d-flex justify-content-center flex-wrap mb-3",selectedNumber:t.number,onButtonClick:i,disabledNumbers:[7]}),l.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},Object.keys(M).map(function(e){return l.a.createElement(q,{key:e,className:"tile m-1",active:e===t.type,onClick:function(){return r(e)}},l.a.createElement(F,{type:e,height:70}))}))),l.a.createElement(j.e,{className:"d-flex justify-content-between"},l.a.createElement(q,{onClick:a},"Cancel"),l.a.createElement(q,{color:"info",onClick:s},"Clear"),l.a.createElement(q,{outline:!0,color:"success",onClick:function(){return c(t)}},"Done")))}}]),t}(a.Component);y.b.add(O.a);var K=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={showTileModal:!1,activeTile:{}},n.handleTileClick=function(e){n.setState({showTileModal:!0,activeTile:Object(v.a)({},e)})},n.toggleTileModal=function(){n.setState({activeTile:{},showTileModal:!n.state.showTileModal})},n.handleActiveTileClear=function(){var e=Object.assign(Object(v.a)({},n.state.activeTile),{number:null,type:null});n.setState({activeTile:e})},n.handleActiveTileNumberUpdate=function(e){var t=Object.assign(Object(v.a)({},n.state.activeTile),{number:e});n.setState({activeTile:t})},n.handleActiveTileTypeUpdate=function(e){var t=Object.assign(Object(v.a)({},n.state.activeTile),{type:e});n.setState({activeTile:t})},n.handleTileSave=function(){n.props.onTileUpdate(n.state.activeTile),n.toggleTileModal()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getAddButton",value:function(){var e=this.props,t=e.settlements,n=e.onSettlementAdd;return 5===t.filter(function(e){return!e.isCity}).length?l.a.createElement(j.a,{color:"info"},"Max number of settlements reached"):l.a.createElement(g.a,{className:"mb-3",icon:"plus-circle",size:"2x",onClick:function(){return n()}})}},{key:"getClearAllButton",value:function(){var e=this.props,t=e.settlements,n=e.onClearAll;if(t&&t.length)return l.a.createElement(q,{color:"warning",onClick:n},"Clear All")}},{key:"render",value:function(){var e=this,t=this.props,n=t.settlements,a=t.tiles,i=t.onSettlementUpdate,r=this.state,c=r.showTileModal,s=r.activeTile;return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,{isOpen:c,tile:s,toggle:this.toggleTileModal,onUpdateNumber:this.handleActiveTileNumberUpdate,onUpdateType:this.handleActiveTileTypeUpdate,onSave:this.handleTileSave,onClear:this.handleActiveTileClear}),l.a.createElement("div",null,this.getAddButton(),n.map(function(t,n){return l.a.createElement(P,{key:t.id,settlement:t,tiles:a.filter(function(e){return e.settlementId===t.id}),onClick:i,onTileClick:e.handleTileClick})}),this.getClearAllButton()))}}]),t}(a.Component),Q=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleNumberUpdate=function(e){-1===n.state.disabledNumbers.indexOf(e)&&n.setState({selectedNumber:e})},n.calculateResourcesForRolls=function(){var e=n.props,t=e.settlements;return e.tiles.reduce(function(e,n){var a=t.find(function(e){return e.id===n.settlementId}),l=n.type,i=n.number;return e[i]||(e[i]={}),e[i][l]||(e[i][l]=0),e[i][l]+=a.isCity?2:1,e},{})};var a=n.calculateResourcesForRolls(),l=I.filter(function(e){return!a[e]});return n.state={selectedNumber:e.selectedNumber,resources:a,disabledNumbers:l},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.resources,n=e.selectedNumber,a=e.disabledNumbers,i=t[n]||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{className:"d-flex justify-content-center flex-wrap mb-5",selectedNumber:n,disabledNumbers:a,onButtonClick:this.handleNumberUpdate}),l.a.createElement("div",{className:"d-flex justify-content-center bd-highlight mb-3"},Object.keys(i).map(function(e){var t=i[e];return l.a.createElement("div",{className:"p-2 bd-highlight",key:e},l.a.createElement(J,{key:e,type:e,number:t}))})))}}]),t}(a.Component),V=n(54),X=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement(j.j,{className:"p-0",expand:!0,color:"dark",fixed:"top",dark:!0},l.a.createElement(j.g,{className:"w-100",navbar:!0,justified:!0,horizontal:"center"},l.a.createElement(j.h,null,l.a.createElement(j.i,{to:"/setup",activeClassName:"active",tag:V.a},"Settlements")),l.a.createElement(j.h,null,l.a.createElement(j.i,{to:"/chart",activeClassName:"active",tag:V.a},"Chart"))))}}]),t}(a.Component),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).getInitialState=function(){return{lastSettlementId:0,lastTileId:0,settlements:[],tiles:[],showTileModal:!1,activeTile:{}}},n.resetState=function(){n.setState(n.getInitialState())},n.saveStateToLocalStorage=function(){for(var e in n.state)localStorage.setItem(e,JSON.stringify(n.state[e]))},n.handleSettlementAdd=function(){for(var e=n.state.settlements.slice(),t=n.state.lastSettlementId+1,a=n.state.tiles.slice(),l=n.state.lastTileId,i=[],r=0;r<3;r++)i.push({id:++l,settlementId:t,type:null,number:null});n.setState({lastSettlementId:t,lastTileId:l,settlements:[{id:t,isCity:!1}].concat(Object(s.a)(e)),tiles:a.concat(i)})},n.handleSettlementUpdate=function(e){var t=n.state.settlements.slice();if(e.isCity?t.filter(function(e){return!e.isCity}).length<5:t.filter(function(e){return e.isCity}).length<4){var a=t.indexOf(e);t[a].isCity=!t[a].isCity,n.setState({settlements:t})}},n.handleTileUpdate=function(e){if(!(e.type&&!e.number||!e.type&&e.number)){var t=n.state.tiles.slice(),a=t.findIndex(function(t){return t.id===e.id});t[a]=Object.assign(t[a],e),n.setState({tiles:t})}},n.state=n.getInitialState(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.hydrateStateWithLocalStorage(),window.addEventListener("beforeunload",this.saveStateToLocalStorage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage),this.saveStateToLocalStorage()}},{key:"hydrateStateWithLocalStorage",value:function(){for(var e in this.state)if(localStorage.hasOwnProperty(e)){var t=localStorage.getItem(e);try{t=JSON.parse(t),this.setState(Object(c.a)({},e,t))}catch(n){this.setState(Object(c.a)({},e,t))}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.settlements,a=t.tiles;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X,null),l.a.createElement("main",{className:"container"},l.a.createElement("div",{className:"text-center"},l.a.createElement(h.a,null,l.a.createElement(f.a,{path:"/setup",render:function(t){return l.a.createElement(K,Object.assign({},t,{settlements:n,tiles:a,onSettlementAdd:e.handleSettlementAdd,onSettlementUpdate:e.handleSettlementUpdate,onTileUpdate:e.handleTileUpdate,onClearAll:e.resetState}))}}),l.a.createElement(f.a,{path:"/chart",render:function(e){return l.a.createElement(Q,Object.assign({},e,{settlements:n,tiles:a.filter(function(e){return"empty"!==e.type})}))}}),l.a.createElement(b.a,{from:"/",to:"/setup"})))))}}]),t}(a.Component),Z=n(51);r.a.render(l.a.createElement(Z.a,null,l.a.createElement(Y,null)),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.57053f21.chunk.js.map